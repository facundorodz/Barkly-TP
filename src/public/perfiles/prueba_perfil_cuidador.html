<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Oswald:wght@200..700&display=swap"
      rel="stylesheet"
    />

    <title>Barkly Co - Perfil Cuidador</title>

    <!-- Ajustá tu ruta real -->
    <link rel="stylesheet" href="/perfiles/css/perfil_cuidador_estilos.css" />
    <link rel="icon" href="/assets/images/icono_metadata.png" type="image/png" />
  </head>

  <body>
    <div class="navbar-container">
      <nav class="navbar navbar-expand-lg bg-body-tertiary">
        <div class="container-fluid">
          <a class="navbar-brand d-flex align-items-center" href="/index.html">
            <img
              src="/assets/images/icono_rojo.png"
              alt="Logo Barkly CO"
              width="50"
              height="50"
              class="me-2"
            />
            Barkly Co
          </a>

          <div class="collapse navbar-collapse" id="mas-info">
            <ul class="navbar-nav ms-auto">
              <li class="nav-item">
                <a class="nav-link active" href="/index.html">Inicio</a>
              </li>
            </ul>

            <button type="button" class="btn btn-outline-danger ms-2" id="btn-logout">
              Cerrar sesión
            </button>
          </div>
        </div>
      </nav>
    </div>

    <div class="contenedor-general container my-4">
      <div class="titulo-pagina mb-3">
        <h1 class="text-center">Mi perfil</h1>
      </div>

      <!-- Header perfil -->
      <div class="card mb-4">
        <div class="card-body d-flex align-items-center justify-content-between flex-wrap gap-3">
          <div class="d-flex align-items-center gap-3">
            <div class="position-relative">
              <img
                class="rounded-circle border"
                id="profilePic"
                src=""
                width="90"
                height="90"
                alt="Foto perfil"
                style="object-fit: cover"
              />
              <!-- Si no vas a subir físicamente la imagen, este input solo sirve para previsualizar localmente -->
              <input type="file" id="photo" class="form-control form-control-sm mt-2" />
              <small class="text-muted d-block">Solo preview local</small>
            </div>

            <div>
              <h2 class="mb-0" id="nombre-superheroe-header">Usuario</h2>
              <p class="mb-0 text-muted" id="franquicia-header">Miembro</p>
              <small class="d-block mt-1"
                >Paquetes ofrecidos: <span id="contador-paquetes">0</span></small
              >
            </div>
          </div>

          <div class="text-end">
            <span class="badge bg-secondary" id="badge-id">ID: -</span>
          </div>
        </div>
      </div>

      <div class="row g-4">
        <!-- Form perfil -->
        <div class="col-lg-6">
          <div class="card">
            <div class="card-header bg-light">
              <h5 class="mb-0">Mis datos</h5>
            </div>

            <div class="card-body">
              <form id="form-perfil">
                <div class="mb-3">
                  <label class="form-label">Nombre de cuidador</label>
                  <input type="text" class="form-control" id="nickname" placeholder="Ej: Hulk" />
                </div>

                <div class="mb-3">
                  <label class="form-label">Contraseña</label>
                  <input type="password" class="form-control" id="contrasena" />
                </div>

                <div class="mb-3">
                  <label class="form-label">Franquicia</label>
                  <input type="text" class="form-control" id="franquicia" placeholder="Ej: DC" />
                </div>

                <div class="mb-3">
                  <label class="form-label">Poderes</label>
                  <input
                    type="text"
                    class="form-control"
                    id="poderes"
                    placeholder="Ej: volar, super fuerza"
                  />
                </div>

                <div class="mb-3">
                  <label class="form-label">Experiencia (años)</label>
                  <input type="text" class="form-control" id="experiencia" placeholder="Años" />
                </div>

                <div class="d-flex justify-content-between mt-3">
                  <button type="submit" class="btn btn-danger">Guardar cambios</button>
                  <button type="button" class="btn btn-outline-secondary btn-sm" id="btn-cancelar-perfil">
                    Deshacer cambios
                  </button>
                </div>
              </form>

              <hr />

              <button type="button" class="btn btn-outline-danger btn-sm" id="btn-eliminar-cuenta">
                Eliminar cuenta
              </button>
            </div>
          </div>
        </div>

        <!-- Paquetes -->
        <div class="col-lg-6">
          <div class="card mb-3">
            <div class="card-header bg-light d-flex justify-content-between align-items-center">
              <h5 class="mb-0">Mis paquetes</h5>

              <button
                type="button"
                class="btn btn-dark"
                data-bs-toggle="modal"
                data-bs-target="#modalPaquetes"
                id="btn-abrir-modal-paquete"
              >
                Añadir paquete
              </button>
            </div>

            <div class="card-body">
              <div class="table-responsive">
                <table class="table align-middle" id="tabla-paquetes">
                  <thead>
                    <tr>
                      <th>Nombre</th>
                      <th>Descripción</th>
                      <th>Precio</th>
                      <th class="text-center">Acciones</th>
                    </tr>
                  </thead>
                  <tbody>
                    <!-- JS -->
                  </tbody>
                </table>
              </div>
            </div>
          </div>

          <!-- Formulario inferior de EDICIÓN -->
          <div class="card">
            <div class="card-header bg-light d-flex justify-content-between align-items-center">
              <h5 class="mb-0" id="titulo-edicion">Editar paquete</h5>
              <small class="text-muted">Edición desde la lista</small>
            </div>

            <div class="card-body">
              <form id="form-paquete-edicion">
                <input type="hidden" id="paquete_id" />

                <div class="row g-3">
                  <div class="col-md-4">
                    <label class="form-label">Nombre del paquete</label>
                    <select class="form-select" id="nombre_paquete_select">
                      <option value="">Elegir...</option>
                      <option value="Estandar">Estandar</option>
                      <option value="Premium">Premium</option>
                      <option value="Deluxe">Deluxe</option>
                    </select>
                  </div>

                  <div class="col-md-4">
                    <label class="form-label">Precio</label>
                    <input type="number" min="0" class="form-control" id="precio_paquete" />
                  </div>

                  <div class="col-12">
                    <label class="form-label">Descripción</label>
                    <textarea class="form-control" id="descripcion_paquete" rows="2"></textarea>
                  </div>
                </div>

                <div class="mt-3 d-flex justify-content-between">
                  <div class="d-flex gap-2">
                    <button type="submit" class="btn btn-danger" id="btn-guardar-edicion">
                      Guardar cambios
                    </button>
                    <button type="button" class="btn btn-outline-secondary btn-sm" id="btn-limpiar-paquete">
                      Cancelar
                    </button>
                  </div>

                  <button type="button" class="btn btn-outline-danger btn-sm" id="btn-eliminar-paquete-seleccionado">
                    Eliminar seleccionado
                  </button>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- MODAL: crear paquete (NO editar) -->
    <div class="modal fade" tabindex="-1" id="modalPaquetes" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">Agregar paquetes</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
          </div>

          <div class="modal-body">
            <div class="alert alert-secondary py-2">
              Podés crear hasta <strong>3</strong> paquetes.
            </div>

            <div id="contenedor-paquetes-modal">
              <!-- Item base -->
              <div class="border rounded p-3 mb-3 paquete-modal-item" data-index="1">
                <h2 class="h5 mb-3" id="nombre_paquete_modal_1">Plan Básico</h2>

                <label class="form-label">Descripción</label>
                <input type="text" class="form-control mb-2" id="descripcion_paquete_modal_1" />

                <label class="form-label">Precio</label>
                <input type="number" min="0" class="form-control" id="precio_paquete_modal_1" />
              </div>
            </div>

            <button type="button" class="btn btn-outline-secondary w-100" id="btn-agregar-otro-paquete">
              Agregar otro paquete
            </button>
          </div>

          <div class="modal-footer">
            <button type="button" class="btn btn-dark" data-bs-dismiss="modal" id="btn-cancelar-paquete">
              Cancelar
            </button>
            <button type="button" class="btn btn-danger" id="btn-guardar-paquete">
              Guardar paquetes
            </button>
          </div>
        </div>
      </div>
    </div>

    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
      defer
    ></script>

    <!-- Ajustá tu ruta real -->
    <script src="/perfiles/js/prueba_perfil_cuidador.js" defer></script>
  </body>
</html>
