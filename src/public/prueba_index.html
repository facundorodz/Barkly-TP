<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Catálogo de Cuidadores</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CDN -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

    <style>
        body {
            background-color: #f0f0f5;
        }
        .card {
            transition: transform 0.2s;
        }
        .card:hover {
            transform: scale(1.03);
        }
        .foto-perfil {
            width: 140px;
            height: 140px;
            object-fit: cover;
            border-radius: 50%;
            border: 3px solid #ddd;
            margin-top: 15px;
        }
    </style>
</head>

<body>
    <div class="container py-5">
        <h1 class="text-center mb-4">Catálogo de Cuidadores</h1>

        <div id="catalogo" class="row g-4">
            <!-- Aquí se imprimen los cuidadores dinámicamente -->
        </div>
    </div>

    <script>
        const API = "http://localhost:3000/cuidadores";

        async function cargarCatalogo() {
            try {
                const res = await fetch(API);
                const cuidadores = await res.json();

                const contenedor = document.getElementById("catalogo");
                contenedor.innerHTML = "";

                cuidadores.forEach(c => {
                    contenedor.innerHTML += `
                        <div class="col-md-4">
                            <div class="card text-center shadow-lg p-3">
                                <img src="${c.foto_perfil || 'https://via.placeholder.com/150'}"
                                     class="foto-perfil" alt="Foto de ${c.nombre}">

                                <div class="card-body">
                                    <h4 class="card-title">${c.nombre}</h4>
                                    <p class="card-text">
                                        <strong>Franquicia:</strong> ${c.franquicia} <br>
                                        <strong>Experiencia:</strong> ${c.experiencia} años <br>
                                        <strong>Poderes:</strong>
                                        <ul style="text-align: left; margin: 0 auto; width: fit-content;">
                                            ${c.poderes
                                                .split(',')
                                                .map(p => `<li>${p.trim()}</li>`)
                                                .join('')
                                            }
                                        </ul>

                                        <strong>Paquetes ofrecidos:</strong> ${c.paquetes_ofrecidos}
                                    </p>

                                    <a href="prueba_crud.html?id=${c.id}"
                                       class="btn btn-primary mt-2">
                                        Ver Perfil
                                    </a>
                                </div>
                            </div>
                        </div>
                    `;
                });

            } catch (error) {
                console.error("Error cargando catálogo:", error);
            }
        }

        cargarCatalogo();
    </script>
</body>
</html>
